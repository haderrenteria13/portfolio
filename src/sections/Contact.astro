---
import { useTranslations, type Lang } from "../i18n/utils";
import ProximityTitle from "../components/ProximityTitle.jsx";
import FooterDock from "../components/FooterDock.jsx";
import { Image, getImage } from "astro:assets";

// Import assets for Dock
import gitIcon from "../assets/git.webp";
import igIcon from "../assets/ig.webp";
import linkedinIcon from "../assets/linkedin.webp";

interface Props {
  lang?: Lang;
}

const { lang = "es" } = Astro.props;
const t = useTranslations(lang);

// Optimize images
const optimizedGitIcon = await getImage({ src: gitIcon, format: "webp" });
const optimizedIgIcon = await getImage({ src: igIcon, format: "webp" });
const optimizedLinkedinIcon = await getImage({
  src: linkedinIcon,
  format: "webp",
});

const dockItems = [
  {
    label: "Instagram",
    href: "https://www.instagram.com/hader_____13/",
    src: optimizedIgIcon.src,
  },
  {
    label: "GitHub",
    href: "https://github.com/haderrenteria13",
    src: optimizedGitIcon.src,
  },
  {
    label: "LinkedIn",
    href: "https://www.linkedin.com/in/haderrenteria/",
    src: optimizedLinkedinIcon.src,
  },
];
---

<section
  id="contact"
  class="relative overflow-hidden bg-black min-h-screen flex flex-col"
>
  <!-- Enhanced background with gradient overlay -->
  <div
    class="absolute inset-0 bg-gradient-to-b from-black via-neutral-950 to-black pointer-events-none"
  >
  </div>

  <!-- Animated background elements -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div
      class="absolute top-1/3 left-1/4 w-[600px] h-[600px] bg-amber-500/8 rounded-full blur-[100px] animate-float"
    >
    </div>
    <div
      class="absolute bottom-1/3 right-1/4 w-[500px] h-[500px] bg-amber-600/6 rounded-full blur-[120px] animate-float-delayed"
    >
    </div>
    <div
      class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[400px] h-[400px] bg-white/3 rounded-full blur-[80px]"
    >
    </div>
  </div>

  <!-- Subtle grid pattern -->
  <div
    class="absolute inset-0 opacity-[0.015] pointer-events-none"
    style="background-image: radial-gradient(circle at center, rgba(255,255,255,0.8) 1px, transparent 1px); background-size: 50px 50px;"
  >
  </div>

  <!-- Main Content Container -->
  <div
    class="relative z-10 flex flex-col w-full max-w-6xl mx-auto flex-grow h-full pt-20 pb-8 px-6"
  >
    <!-- CENTER: Call to Action (Title + Button) -->
    <div class="flex-grow flex flex-col items-center justify-center">
      <!-- Main Title -->
      <div class="mb-12 text-center">
        <h2
          class="font-playfair text-4xl md:text-5xl lg:text-6xl xl:text-7xl leading-[0.95] tracking-tight text-white mb-6"
        >
          <ProximityTitle
            client:idle
            text={lang === "es" ? "¿Listo para crear" : "Ready to create"}
            className="block font-playfair"
            fromFontVariationSettings="'wght' 400"
            toFontVariationSettings="'wght' 900"
          />
          <ProximityTitle
            client:idle
            text={lang === "es" ? "algo increíble?" : "something amazing?"}
            className="block font-playfair"
            fromFontVariationSettings="'wght' 400"
            toFontVariationSettings="'wght' 900"
          />
        </h2>
      </div>

      <!-- Handwritten hint -->
      <div class="mb-12 flex items-center justify-center">
        <p
          class="font-cursive text-xl md:text-2xl text-amber-100 transform -rotate-3 text-center max-w-xs"
        >
          {
            lang === "es"
              ? "Toque este 'pequeño' botón para contactarme =)"
              : "Tap this 'tiny' button to contact me =)"
          }
        </p>
      </div>

      <!-- THE BUTTON -->
      <div class="relative inline-block group mb-12">
        <!-- Glow effect on hover -->
        <div
          class="absolute -inset-4 bg-gradient-to-r from-amber-500/20 via-amber-400/30 to-amber-500/20 rounded-full blur-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"
        >
        </div>

        <a href="mailto:hello@hader.software" class="relative block">
          <button
            class="relative rotate-2 hover:rotate-0 -translate-y-2 hover:translate-y-0 px-12 md:px-24 lg:px-32 py-8 md:py-10 rounded-full bg-linear-to-b from-[#424244] via-[#363638] to-[#2C2C2E] text-white font-semibold text-3xl md:text-5xl lg:text-6xl transition-all duration-200 shadow-[inset_0_2px_4px_0_rgba(255,255,255,0.12),inset_0_-2px_4px_0_rgba(0,0,0,0.4),0_0_0_0.5px_rgba(0,0,0,0.5),0_0_0_5px_rgba(58,58,60,0.28),0_12px_24px_-6px_rgba(0,0,0,0.4),0_8px_16px_-4px_rgba(0,0,0,0.3)] hover:from-[#4A4A4C] hover:to-[#363638] hover:shadow-[inset_0_2px_4px_0_rgba(255,255,255,0.15),inset_0_-2px_4px_0_rgba(0,0,0,0.4),0_0_0_0.5px_rgba(251,191,36,0.3),0_0_0_5px_rgba(251,191,36,0.4),0_0_60px_rgba(251,191,36,0.4),0_16px_32px_-6px_rgba(0,0,0,0.5)] active:scale-[0.97] active:shadow-[inset_0_2px_4px_0_rgba(255,255,255,0.12),inset_0_-2px_4px_0_rgba(0,0,0,0.4),0_0_0_0.5px_rgba(0,0,0,0.5),0_0_0_5px_rgba(58,58,60,0.38),0_4px_8px_-2px_rgba(0,0,0,0.3)] overflow-hidden group-hover:scale-105"
          >
            <!-- Shimmer effect -->
            <div class="absolute inset-0 overflow-hidden rounded-full">
              <div
                class="absolute inset-0 -translate-x-full bg-linear-to-r from-transparent via-white/20 to-transparent group-hover:animate-shimmer"
              >
              </div>
            </div>

            <!-- Text with gradient on hover -->
            <span
              class="relative z-10 bg-clip-text text-white transition-all duration-300 group-hover:text-transparent group-hover:bg-gradient-to-r group-hover:from-amber-200 group-hover:via-amber-400 group-hover:to-amber-200"
            >
              {lang === "es" ? "Contactar" : "Get in Touch"}
            </span>
          </button>
        </a>
      </div>
    </div>

    <!-- BOTTOM: New Footer Dock -->
    <div class="w-full mt-auto">
      <FooterDock
        client:visible
        items={dockItems}
        email="hello@hader.software"
      />
    </div>
  </div>
</section>

<style>
  @import url("https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&display=swap");

  .font-cursive {
    font-family: "Caveat", cursive;
  }

  @keyframes float {
    0%,
    100% {
      transform: translateY(0px) scale(1);
    }
    50% {
      transform: translateY(-30px) scale(1.05);
    }
  }

  @keyframes float-delayed {
    0%,
    100% {
      transform: translateY(0px) scale(1);
    }
    50% {
      transform: translateY(30px) scale(0.95);
    }
  }

  .animate-float {
    animation: float 20s ease-in-out infinite;
  }
  .animate-float-delayed {
    animation: float-delayed 25s ease-in-out infinite;
  }
</style>
